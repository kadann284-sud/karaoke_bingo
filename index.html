<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ã‚«ãƒ©ã‚ªã‚±ãƒ“ãƒ³ã‚´</title>
<style>
    body {
        font-family: sans-serif;
        background: #111;
        color: #fff;
        text-align: center;
    }

    .controls {
        margin: 20px;
    }

    input, button {
        font-size: 16px;
        padding: 6px 10px;
        margin: 5px;
    }

    #conditionList {
        margin: 20px auto;
        width: 300px;
        text-align: left;
        font-size: 14px;
        background: #222;
        padding: 10px;
        border-radius: 8px;
    }

    #bingo {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        max-width: 600px;
        margin: 30px auto;
    }

    .cell {
        background: #333;
        border-radius: 10px;
        padding: 15px;
        min-height: 100px;
        font-size: 18px;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .score {
        font-weight: bold;
        font-size: 22px;
    }

    .range {
        font-size: 12px;
        opacity: 0.8;
    }
</style>
</head>
<body>

<h1>ğŸ¤ ã‚«ãƒ©ã‚ªã‚±ãƒ“ãƒ³ã‚´ ğŸ¤</h1>

<div class="controls">
    éŠã¶äººæ•°ï¼š
    <input type="number" id="players" min="2" value="4">
    <button onclick="generateBingo()">ãƒ“ãƒ³ã‚´ç”Ÿæˆ</button>
</div>

<div id="conditionList"></div>
<div id="bingo"></div>

<script>
const baseConditions = [
    { text: "ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆæŒ‡å®š", color: "#ff7675" },
    { text: "ãƒãƒ©ãƒ¼ãƒ‰", color: "#74b9ff" },
    { text: "ã‚¢ãƒƒãƒ—ãƒ†ãƒ³ãƒ", color: "#55efc4" },
    { text: "ã¿ã‚“ãªçŸ¥ã£ã¦ã„ã‚‹æ›²", color: "#ffeaa7" },
    { text: "ä¸€äººã ã‘çŸ¥ã‚‰ãªã„æ›²", color: "#fd79a8", minPlayers: 3 },
    { text: "ã‚«ãƒ©ã‚ªã‚±ãƒ©ãƒ³ã‚­ãƒ³ã‚°ä¸Šä½æ›²", color: "#a29bfe" },
    { text: "ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆåãŒã€‡è¡Œ or â–¡æ®µ", color: "#fab1a0" },
    { text: "æ›²åãŒã€‡è¡Œ or â–¡æ®µ", color: "#81ecec" }
];

const gyou = ["ã‚","ã‹","ã•","ãŸ","ãª","ã¯","ã¾","ã‚„","ã‚‰","ã‚"];
const dan = ["ã‚","ã„","ã†","ãˆ","ãŠ"];

function randomScore() {
    return Math.floor(Math.random() * 21) + 80; // 80ã€œ100
}

function scoreRange(score) {
    return `${(score - 1).toFixed(2)} ï½ ${(score + 0.99).toFixed(2)}`;
}

function randomGyouDanText() {
    const useGyou = Math.random() < 0.5;
    if (useGyou) {
        return `${gyou[Math.floor(Math.random() * gyou.length)]}è¡Œ`;
    } else {
        return `${dan[Math.floor(Math.random() * dan.length)]}æ®µ`;
    }
}

function generateBingo() {
    const players = Number(document.getElementById("players").value);
    const bingo = document.getElementById("bingo");
    const conditionList = document.getElementById("conditionList");

    bingo.innerHTML = "";
    conditionList.innerHTML = "";

    // äººæ•°åˆ¶é™
    let conditions = baseConditions.filter(c =>
        !c.minPlayers || players >= c.minPlayers
    );

    // æ¡ä»¶ãƒªã‚¹ãƒˆè¡¨ç¤ºï¼ˆç”Ÿæˆå‰ï¼‰
    conditionList.innerHTML = "<strong>ä½¿ç”¨æ¡ä»¶ï¼š</strong><ul>" +
        conditions.map(c => `<li>${c.text}</li>`).join("") +
        "</ul>";

    // 9ãƒã‚¹åˆ†ä½œæˆï¼ˆå¿…ãš1å›ä»¥ä¸Šä½¿ã†ï¼‰
    let selected = [];
    while (selected.length < 9) {
        selected.push(...conditions);
    }
    selected = selected.slice(0, 9);

    // ã‚·ãƒ£ãƒƒãƒ•ãƒ«
    selected.sort(() => Math.random() - 0.5);

    selected.forEach(cond => {
        let text = cond.text;

        if (text.includes("ã€‡è¡Œ or â–¡æ®µ")) {
            const gd = randomGyouDanText();
            text = text.replace("ã€‡è¡Œ or â–¡æ®µ", gd);
        }

        const score = randomScore();

        const cell = document.createElement("div");
        cell.className = "cell";
        cell.style.background = cond.color;
        cell.innerHTML = `
            <div>${text}</div>
            <div class="score">${score}ç‚¹</div>
            <div class="range">${scoreRange(score)}</div>
        `;
        bingo.appendChild(cell);
    });

    // ç”Ÿæˆå¾Œã¯æ¡ä»¶ãƒªã‚¹ãƒˆéè¡¨ç¤º
    conditionList.style.display = "none";
}
</script>

</body>
</html>
