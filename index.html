<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ã‚«ãƒ©ã‚ªã‚±ãƒ“ãƒ³ã‚´</title>
<style>
  body {
    font-family: "Segoe UI", system-ui, sans-serif;
    background: linear-gradient(135deg, #1e1e2f, #2b2b45);
    color: #fff;
    margin: 0;
    padding: 16px;
  }

  h1 { text-align: center; margin-bottom: 8px; }

  .container {
    max-width: 900px;
    margin: auto;
    display: grid;
    grid-template-columns: 1fr 220px;
    gap: 16px;
  }

  .controls, .description, .conditions-box {
    background: rgba(255,255,255,0.08);
    border-radius: 12px;
    padding: 12px;
    margin-bottom: 12px;
  }

  .controls input {
    width: 100%;
    padding: 8px;
    margin-bottom: 8px;
    border-radius: 8px;
    border: none;
  }

  button {
    width: 100%;
    padding: 10px;
    border: none;
    border-radius: 10px;
    font-size: 16px;
    font-weight: bold;
    background: linear-gradient(135deg, #ff7a18, #ffb347);
    color: #000;
    cursor: pointer;
  }

  table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 8px;
  }

  td {
    height: 150px;
    border-radius: 18px;
    text-align: center;
    font-weight: bold;
    font-size: 26px;
    cursor: pointer;
    transition: transform 0.12s ease, box-shadow 0.12s ease, background 0.2s;
    box-shadow: 0 6px 16px rgba(0,0,0,0.35);
  }

  td:active {
    transform: scale(0.94);
  }

  td.marked {
    background: #00e676 !important;
    color: #000;
  }

  td.free {
    background: #ffffff33;
    cursor: default;
  }

  .range {
    display: block;
    font-size: 12px;
    font-weight: normal;
    margin-top: 4px;
  }

  /* æ¡ä»¶è‰² */
  .cat-release { background: #ff8a80; }
  .cat-title { background: #82b1ff; }
  .cat-lang { background: #b9f6ca; }
  .cat-artist { background: #ffd180; }
  .cat-other { background: #e1bee7; }

  .conditions-box ul {
    list-style: none;
    padding: 0;
    margin: 0;
    font-size: 13px;
  }

  .conditions-box li {
    margin-bottom: 4px;
  }

  /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
  .modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 100;
  }

  .modal-content {
    background: #fff;
    color: #000;
    padding: 24px 32px;
    border-radius: 16px;
    font-size: 32px;
    font-weight: bold;
    animation: pop 0.3s ease;
  }

  @keyframes pop {
    from { transform: scale(0.6); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }
</style>
</head>
<body>
<h1>ğŸ¤ ã‚«ãƒ©ã‚ªã‚±ãƒ“ãƒ³ã‚´</h1>

<div class="description">
  <p>
    ä»»æ„ã®ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã‚’3ã¤ã¨é–‹å§‹ç‚¹æ•°ã‚’å…¥åŠ›ã—ã€ã€Œãƒ“ãƒ³ã‚´ç”ŸæˆAã€ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚<br>
    é–‹å§‹ç‚¹æ•°ã‹ã‚‰ï¼‹10ç‚¹ã¾ã§ã®ç¯„å›²ã§ã€å„ãƒã‚¹ã®ç‚¹æ•°ãŒãƒ©ãƒ³ãƒ€ãƒ ã«ç”Ÿæˆã•ã‚Œã¾ã™ã€‚<br>
    è‡ªåˆ†ãŒæ­Œã£ãŸæ›²ãƒ»ä»–ã®äººãŒæ­Œã£ãŸæ›²ã©ã¡ã‚‰ã§ã‚‚ã€æ¡ä»¶ã¨ç‚¹æ•°ãŒä¸€è‡´ã—ã¦ã„ã‚Œã°ãƒã‚¹ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ãã ã•ã„ã€‚<br>
    ä»–ã®äººãŒæ­Œã£ãŸå ´åˆã‚‚ã€ä¸€åº¦æ­Œã‚ã‚ŒãŸæ›²ã¯å†åº¦ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚
  </p>
</div>

<div class="container">
  <div style="grid-column:1 / -1">
    <div class="controls">
      <input id="artist1" placeholder="ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆ1" />
      <input id="artist2" placeholder="ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆ2" />
      <input id="artist3" placeholder="ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆ3" />
      <input id="startScore" type="number" value="80" />
      <button onclick="generateBingo()">ãƒ“ãƒ³ã‚´ç”Ÿæˆ</button>
    </div>

    <div class="conditions-box" id="preConditions">
      <strong>æ¡ä»¶ãƒªã‚¹ãƒˆï¼ˆç”Ÿæˆå‰ã®ã¿è¡¨ç¤ºï¼‰</strong>
      <ul id="conditionList"></ul>
    </div>

    <table id="bingo"></table>
  </div>
</div>

<div class="modal" id="bingoModal">
  <div class="modal-content">ãƒ“ãƒ³ã‚´ï¼</div>
</div>

<script>
const baseConditions = [
  { name: "ã‚¢ãƒƒãƒ—ãƒ†ãƒ³ãƒ", cat: "cat-other" },
  { name: "ãƒãƒ©ãƒ¼ãƒ‰", cat: "cat-other" },
  { name: "ä¸€äººã ã‘çŸ¥ã‚‰ãªã„æ›²", cat: "cat-other" },

  { name: "2015â€“2017å¹´ãƒªãƒªãƒ¼ã‚¹", cat: "cat-release" },
  { name: "2018â€“2020å¹´ãƒªãƒªãƒ¼ã‚¹", cat: "cat-release" },
  { name: "2021â€“2023å¹´ãƒªãƒªãƒ¼ã‚¹", cat: "cat-release" },
  { name: "2024å¹´ä»¥é™ã®ãƒªãƒªãƒ¼ã‚¹", cat: "cat-release" },

  { name: "æ›²åæ¼¢å­—ã®ã¿", cat: "cat-title" },
  { name: "æ›²åè‹±èªã®ã¿", cat: "cat-title" },
  { name: "æ›²åã‚«ã‚¿ã‚«ãƒŠã®ã¿", cat: "cat-title" },

  { name: "æ—¥æœ¬èªã§8æ–‡å­—ä»¥ä¸Šã®æ›²", cat: "cat-lang" },
  { name: "æ—¥æœ¬èªã§2æ–‡å­—ä»¥ä¸‹ã®æ›²", cat: "cat-lang" }
];

function renderConditionList(extraArtists = []) {
  const ul = document.getElementById("conditionList");
  if (!ul) return;
  ul.innerHTML = "";
  const list = [...baseConditions, ...extraArtists.map(a => ({ name: a }))];
  list.forEach(c => {
    const li = document.createElement("li");
    li.textContent = c.name;
    ul.appendChild(li);
  });
}

// åˆæœŸè¡¨ç¤ºï¼ˆç”Ÿæˆå‰ï¼‰
renderConditionList();

function generateBingo() {
  // æ¡ä»¶ãƒªã‚¹ãƒˆã¯ç”Ÿæˆå¾Œã«éè¡¨ç¤º
  document.getElementById("preConditions").style.display = "none";
  // æ¡ä»¶ãƒªã‚¹ãƒˆã¯ç”Ÿæˆå¾Œã«éè¡¨ç¤º
  document.getElementById("preConditions").style.display = "none";
  const table = document.getElementById("bingo");
  table.innerHTML = "";
  document.getElementById("bingoModal").style.display = "none";

  const start = Number(document.getElementById("startScore").value);
  const min = start;
  const max = start + 10;

  const artists = [artist1.value, artist2.value, artist3.value].filter(a => a);
  let conditions = [...baseConditions, ...artists.map(a => ({ name: a, cat: "cat-artist" }))];

  // æ¡ä»¶ä¸€è¦§è¡¨ç¤º
  const ul = document.getElementById("conditionList");
  ul.innerHTML = "";
  conditions.forEach(c => {
    const li = document.createElement("li");
    li.textContent = c.name;
    ul.appendChild(li);
  });

  // å¿…ãš1å›ä»¥ä¸Š
  let pool = [...conditions];
  while (pool.length < 9) pool.push(conditions[Math.floor(Math.random()*conditions.length)]);
  pool.sort(() => Math.random() - 0.5);

  let idx = 0;
  for (let r = 0; r < 3; r++) {
    const tr = table.insertRow();
    for (let c = 0; c < 3; c++) {
      const td = tr.insertCell();

      
      }

      const cond = pool[idx++];
      const score = Math.floor(Math.random() * (max - min + 1)) + min;
      const low = (score - 1).toFixed(2);
      const high = (score + 0.99).toFixed(2);

      td.className = cond.cat;
      td.innerHTML = `${score}ç‚¹<span class="range">${low}ï½${high}</span><div style="font-size:13px">${cond.name}</div>`;

      td.onclick = () => {
        td.classList.toggle("marked");
        checkBingo();
      };
    }
  }
}

function checkBingo() {
  const cells = Array.from(document.querySelectorAll("td")).filter(td => !td.classList.contains("free"));
  const get = (r,c) => document.getElementById("bingo").rows[r].cells[c];

  const lines = [];
  for (let i=0;i<5;i++) {
    lines.push([...Array(5).keys()].map(j=>get(i,j)));
    lines.push([...Array(5).keys()].map(j=>get(j,i)));
  }
  lines.push([...Array(5).keys()].map(i=>get(i,i)));
  lines.push([...Array(5).keys()].map(i=>get(i,4-i)));

  if (lines.some(line => line.every(td => td.classList.contains("marked") || td.classList.contains("free")))) {
    cells.forEach(td => td.classList.add("marked"));
    document.getElementById("bingoModal").style.display = "flex";
  }
}
</script>
</body>
</html>
